# ğŸ  æœ¬åœ°å»ºç½®ä¸Šå‚³æ–¹æ¡ˆ

## ğŸš¨ ç•¶ e2-micro å»ºç½®å¤±æ•—æ™‚çš„æœ€ä½³è§£æ±ºæ–¹æ¡ˆ

ç”±æ–¼ e2-micro åªæœ‰ 1GB RAMï¼ŒReact å»ºç½®ç¶“å¸¸å¤±æ•—ã€‚æœ€å¯é çš„è§£æ±ºæ–¹æ¡ˆæ˜¯åœ¨æœ¬åœ°å»ºç½®ï¼Œç„¶å¾Œä¸Šå‚³åˆ° VMã€‚

---

## ğŸ¯ æ–¹æ¡ˆ1: æœ¬åœ°å»ºç½® + SCP ä¸Šå‚³

### Windows ç”¨æˆ¶

#### æ­¥é©Ÿ1: æœ¬åœ°å»ºç½®
```cmd
# åœ¨ä½ çš„ Windows é›»è…¦ä¸Š
cd C:\path\to\your\tutoring-system\client

# å®‰è£ä¾è³´ï¼ˆå¦‚æœé‚„æ²’æœ‰ï¼‰
npm install

# å»ºç½®å‰ç«¯
npm run build

# æª¢æŸ¥å»ºç½®çµæœ
dir build
```

#### æ­¥é©Ÿ2: ä¸Šå‚³åˆ° VM
```cmd
# æ–¹æ³•1: ä½¿ç”¨ PowerShell SCP
scp -r build\ username@your-vm-ip:~/tutoring-system/client/

# æ–¹æ³•2: ä½¿ç”¨ WinSCP
# 1. é–‹å•Ÿ WinSCP
# 2. é€£æ¥åˆ°ä½ çš„ VM
# 3. å°èˆªåˆ° ~/tutoring-system/client/
# 4. åˆªé™¤èˆŠçš„ build è³‡æ–™å¤¾ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
# 5. ä¸Šå‚³æ–°çš„ build è³‡æ–™å¤¾
```

### Linux/Mac ç”¨æˆ¶

#### æ­¥é©Ÿ1: æœ¬åœ°å»ºç½®
```bash
# åœ¨ä½ çš„æœ¬åœ°æ©Ÿå™¨ä¸Š
cd /path/to/your/tutoring-system/client

# å®‰è£ä¾è³´ï¼ˆå¦‚æœé‚„æ²’æœ‰ï¼‰
npm install

# å»ºç½®å‰ç«¯
npm run build

# æª¢æŸ¥å»ºç½®çµæœ
ls -la build/
```

#### æ­¥é©Ÿ2: ä¸Šå‚³åˆ° VM
```bash
# ä½¿ç”¨ rsync ä¸Šå‚³ï¼ˆæ¨è–¦ï¼‰
rsync -avz --delete build/ username@your-vm-ip:~/tutoring-system/client/build/

# æˆ–ä½¿ç”¨ SCP
scp -r build/ username@your-vm-ip:~/tutoring-system/client/
```

---

## ğŸ¯ æ–¹æ¡ˆ2: GitHub Actions è‡ªå‹•å»ºç½®

### å»ºç«‹ GitHub Actions å·¥ä½œæµç¨‹

#### æ­¥é©Ÿ1: å»ºç«‹å·¥ä½œæµç¨‹æª”æ¡ˆ
```yaml
# .github/workflows/build-and-deploy.yml
name: Build and Deploy

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
      
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
        cache: 'npm'
        cache-dependency-path: client/package-lock.json
        
    - name: Install dependencies
      run: |
        cd client
        npm ci
        
    - name: Build application
      run: |
        cd client
        npm run build
        
    - name: Deploy to server
      uses: appleboy/scp-action@v0.1.4
      with:
        host: ${{ secrets.HOST }}
        username: ${{ secrets.USERNAME }}
        key: ${{ secrets.SSH_KEY }}
        source: "client/build/*"
        target: "~/tutoring-system/"
        strip_components: 1
```

#### æ­¥é©Ÿ2: è¨­å®š GitHub Secrets
1. å‰å¾€ GitHub å€‰åº« â†’ Settings â†’ Secrets and variables â†’ Actions
2. æ–°å¢ä»¥ä¸‹ secrets:
   - `HOST`: ä½ çš„ VM IP åœ°å€
   - `USERNAME`: VM ç”¨æˆ¶å
   - `SSH_KEY`: SSH ç§é‘°å…§å®¹

---

## ğŸ¯ æ–¹æ¡ˆ3: å£“ç¸®åŒ…ä¸Šå‚³

### é©ç”¨æ–¼ç¶²è·¯è¼ƒæ…¢çš„æƒ…æ³

#### æ­¥é©Ÿ1: æœ¬åœ°å»ºç½®ä¸¦å£“ç¸®
```bash
# Windows (PowerShell)
cd client
npm run build
Compress-Archive -Path build\ -DestinationPath build.zip

# Linux/Mac
cd client
npm run build
tar -czf build.tar.gz build/
```

#### æ­¥é©Ÿ2: ä¸Šå‚³å£“ç¸®åŒ…
```bash
# ä¸Šå‚³å£“ç¸®åŒ…
scp build.zip username@your-vm-ip:~/
# æˆ–
scp build.tar.gz username@your-vm-ip:~/
```

#### æ­¥é©Ÿ3: åœ¨ VM ä¸Šè§£å£“
```bash
# SSH é€£æ¥åˆ° VM
ssh username@your-vm-ip

# è§£å£“ä¸¦æ›¿æ›
cd ~/tutoring-system/client
rm -rf build
unzip ~/build.zip
# æˆ–
tar -xzf ~/build.tar.gz

# æ¸…ç†å£“ç¸®åŒ…
rm ~/build.zip
# æˆ–
rm ~/build.tar.gz
```

---

## ğŸ¯ æ–¹æ¡ˆ4: ä½¿ç”¨ Docker å¤šéšæ®µå»ºç½®

### å»ºç«‹ Dockerfile
```dockerfile
# Dockerfile.build
FROM node:18 as builder

WORKDIR /app
COPY client/package*.json ./
RUN npm ci

COPY client/ ./
RUN npm run build

FROM alpine:latest
COPY --from=builder /app/build /build
CMD ["tar", "-czf", "/tmp/build.tar.gz", "-C", "/", "build"]
```

### ä½¿ç”¨æ–¹å¼
```bash
# å»ºç½® Docker æ˜ åƒ
docker build -f Dockerfile.build -t tutoring-build .

# åŸ·è¡Œä¸¦æå–å»ºç½®çµæœ
docker run --rm -v $(pwd):/output tutoring-build sh -c "tar -czf /output/build.tar.gz -C / build"

# ä¸Šå‚³åˆ° VM
scp build.tar.gz username@your-vm-ip:~/
```

---

## ğŸš€ å®Œæ•´è‡ªå‹•åŒ–è…³æœ¬

### Windows è‡ªå‹•åŒ–è…³æœ¬
```batch
@echo off
echo æ­£åœ¨æœ¬åœ°å»ºç½®å‰ç«¯...

cd client
call npm run build

if errorlevel 1 (
    echo å»ºç½®å¤±æ•—ï¼
    pause
    exit /b 1
)

echo æ­£åœ¨ä¸Šå‚³åˆ° VM...
scp -r build\ %1@%2:~/tutoring-system/client/

if errorlevel 1 (
    echo ä¸Šå‚³å¤±æ•—ï¼
    pause
    exit /b 1
)

echo æ­£åœ¨é‡å•Ÿ VM æœå‹™...
ssh %1@%2 "cd ~/tutoring-system && pm2 restart tutoring-frontend"

echo éƒ¨ç½²å®Œæˆï¼
pause
```

### Linux/Mac è‡ªå‹•åŒ–è…³æœ¬
```bash
#!/bin/bash
# local-build-deploy.sh

set -e

VM_USER="$1"
VM_IP="$2"

if [ -z "$VM_USER" ] || [ -z "$VM_IP" ]; then
    echo "ç”¨æ³•: $0 <vm-username> <vm-ip>"
    exit 1
fi

echo "ğŸ”¨ æœ¬åœ°å»ºç½®å‰ç«¯..."
cd client
npm run build

echo "ğŸ“¤ ä¸Šå‚³åˆ° VM..."
rsync -avz --delete build/ "$VM_USER@$VM_IP:~/tutoring-system/client/build/"

echo "ğŸ”„ é‡å•Ÿ VM æœå‹™..."
ssh "$VM_USER@$VM_IP" "cd ~/tutoring-system && pm2 restart tutoring-frontend"

echo "âœ… éƒ¨ç½²å®Œæˆï¼"
echo "ğŸŒ è¨ªå•: http://$VM_IP:3000"
```

---

## ğŸ’¡ ä½¿ç”¨å»ºè­°

### é–‹ç™¼æµç¨‹
1. **æœ¬åœ°é–‹ç™¼**: åœ¨ä½ çš„é›»è…¦ä¸Šé–‹ç™¼å’Œæ¸¬è©¦
2. **æœ¬åœ°å»ºç½®**: å®Œæˆå¾Œåœ¨æœ¬åœ°å»ºç½®
3. **ä¸Šå‚³éƒ¨ç½²**: ä¸Šå‚³å»ºç½®çµæœåˆ° VM
4. **æ¸¬è©¦é©—è­‰**: åœ¨ VM ä¸Šæ¸¬è©¦åŠŸèƒ½

### å„ªå‹¢
- âœ… **100% æˆåŠŸç‡**: æœ¬åœ°å»ºç½®ä¸å— VM è¨˜æ†¶é«”é™åˆ¶
- âœ… **é€Ÿåº¦æ›´å¿«**: æœ¬åœ°æ©Ÿå™¨é€šå¸¸æ•ˆèƒ½æ›´å¥½
- âœ… **ç¯€çœæˆæœ¬**: ä¸éœ€è¦å‡ç´š VM
- âœ… **ç©©å®šå¯é **: é¿å… VM è¨˜æ†¶é«”ä¸è¶³å•é¡Œ

### æ³¨æ„äº‹é …
- ğŸ”„ **ä¿æŒåŒæ­¥**: ç¢ºä¿æœ¬åœ°ä»£ç¢¼èˆ‡ VM åŒæ­¥
- ğŸ“¦ **ä¾è³´ä¸€è‡´**: æœ¬åœ°å’Œ VM çš„ Node.js ç‰ˆæœ¬æ‡‰è©²ç›¸è¿‘
- ğŸ”’ **å®‰å…¨è€ƒé‡**: ä½¿ç”¨ SSH é‡‘é‘°è€Œéå¯†ç¢¼

---

## ğŸ¯ æ¨è–¦æ–¹æ¡ˆ

### å€‹äººé–‹ç™¼è€…
**æ–¹æ¡ˆ1**: æœ¬åœ°å»ºç½® + SCP ä¸Šå‚³

### åœ˜éšŠé–‹ç™¼
**æ–¹æ¡ˆ2**: GitHub Actions è‡ªå‹•å»ºç½®

### ç¶²è·¯è¼ƒæ…¢
**æ–¹æ¡ˆ3**: å£“ç¸®åŒ…ä¸Šå‚³

### é€²éšç”¨æˆ¶
**æ–¹æ¡ˆ4**: Docker å¤šéšæ®µå»ºç½®

é¸æ“‡æœ€é©åˆä½ çš„æ–¹æ¡ˆï¼Œå¾¹åº•è§£æ±º e2-micro å»ºç½®å•é¡Œï¼