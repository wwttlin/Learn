# 繳費管理新功能測試指南

## 🧪 測試步驟

### 1. 準備測試資料
1. 開啟系統：http://localhost:3000
2. 先建立一個測試課程：
   - 課程名稱：數學課程
   - 月繳：NT$ 3,000
   - 季繳：NT$ 8,000
   - 半年繳：NT$ 15,000

3. 建立一個測試學生：
   - 學生姓名：測試學生
   - 聯絡電話：0912345678

### 2. 測試訂金功能
1. 進入「繳費管理」
2. 點擊「新增繳費記錄」
3. 填寫資料：
   - 學生：測試學生
   - 課程：數學課程
   - 繳費方式：季繳
   - 訂金金額：2,000
4. 提交後檢查：
   - 總金額應顯示：NT$ 8,000
   - 已繳金額應顯示：NT$ 2,000
   - 剩餘金額應顯示：NT$ 6,000
   - 繳費階段應顯示：訂金階段
   - 狀態應顯示：部分繳費

### 3. 測試尾款功能
1. 點擊該記錄的「繳尾款」按鈕
2. 在彈出視窗中：
   - 繳費金額：6000
   - 付款方式：轉帳
   - 備註：測試尾款繳費
3. 點擊「確認繳費」
4. 檢查更新後的記錄：
   - 已繳金額應顯示：NT$ 8,000
   - 剩餘金額應顯示：NT$ 0
   - 繳費階段應顯示：已完成
   - 狀態應顯示：已完成
   - 「繳尾款」按鈕應消失

### 4. 測試全額繳費
1. 新增另一筆繳費記錄
2. 訂金金額設為：8000（等於總金額）
3. 檢查：
   - 繳費階段應顯示：全額繳費
   - 狀態應顯示：已完成
   - 不應出現「繳尾款」按鈕

### 5. 測試部分尾款繳費
1. 新增一筆繳費記錄，訂金：1000
2. 點擊「繳尾款」，只繳納：3000（不是全部尾款）
3. 檢查：
   - 已繳金額應顯示：NT$ 4,000
   - 剩餘金額應顯示：NT$ 4,000
   - 繳費階段應顯示：尾款階段
   - 狀態應顯示：部分繳費
   - 仍可繼續「繳尾款」

## ✅ 預期結果

- 所有金額計算正確
- 繳費階段和狀態正確顯示
- 繳尾款功能正常運作
- 模態框正常開啟和關閉
- 資料庫正確記錄所有繳費資訊

## 🐛 常見問題

1. **訂金超過總金額**：系統應提示錯誤
2. **尾款金額錯誤**：系統應提示錯誤
3. **資料不同步**：重新整理頁面檢查
4. **模態框無法關閉**：點擊取消按鈕或背景區域