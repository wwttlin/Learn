# ğŸš€ å¿«é€Ÿéƒ¨ç½²æŒ‡å— (Ubuntu Linux)

## ä¸€éµéƒ¨ç½²

### 1. æº–å‚™å·¥ä½œ
```bash
# é€£æ¥åˆ°ä½ çš„ GCP Ubuntu è™›æ“¬æ©Ÿå™¨
gcloud compute ssh your-vm-name --zone=your-zone

# æˆ–ä½¿ç”¨ SSH
ssh username@your-vm-ip
```

### 2. ä¸Šå‚³å°ˆæ¡ˆæª”æ¡ˆ
```bash
# æ–¹æ³•1: ä½¿ç”¨ gcloud scpï¼ˆæ¨è–¦ï¼‰
gcloud compute scp --recurse ./tutoring-system your-vm-name:~/ --zone=your-zone

# æ–¹æ³•2: ä½¿ç”¨ Gitï¼ˆå¦‚æœæœ‰ Git å€‰åº«ï¼‰
git clone https://github.com/your-username/tutoring-system.git
cd tutoring-system

# æ–¹æ³•3: ä½¿ç”¨ rsync
rsync -avz -e ssh ./tutoring-system/ username@your-vm-ip:~/tutoring-system/
```

### 3. åŸ·è¡Œéƒ¨ç½²è…³æœ¬
```bash
cd tutoring-system
chmod +x deploy.sh
./deploy.sh
```

å°±é€™éº¼ç°¡å–®ï¼è…³æœ¬æœƒè‡ªå‹•ï¼š
- âœ… å®‰è£ Node.jsã€Gitã€PM2
- âœ… å®‰è£å°ˆæ¡ˆä¾è³´
- âœ… å»ºç½®å‰ç«¯æ‡‰ç”¨
- âœ… å•Ÿå‹•æœå‹™
- âœ… è¨­å®šè‡ªå‹•é‡å•Ÿ

## ğŸ”§ æ‰‹å‹•éƒ¨ç½²ï¼ˆå¦‚æœè‡ªå‹•è…³æœ¬å¤±æ•—ï¼‰

### 1. å®‰è£ Node.js
```bash
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs
```

### 2. å®‰è£ PM2
```bash
sudo npm install -g pm2 serve
```

### 3. å®‰è£ä¾è³´
```bash
npm install
cd client && npm install && npm run build && cd ..
```

### 4. å•Ÿå‹•æœå‹™
```bash
pm2 start ecosystem.config.js --env production
pm2 save
pm2 startup
```

## ğŸŒ è¨ªå•æ‡‰ç”¨ç¨‹å¼

éƒ¨ç½²å®Œæˆå¾Œï¼š
- **å‰ç«¯**: http://your-vm-ip:3000
- **å¾Œç«¯**: http://your-vm-ip:5000

## ğŸ“Š ç®¡ç†å‘½ä»¤

```bash
# æŸ¥çœ‹æœå‹™ç‹€æ…‹
pm2 status

# æŸ¥çœ‹æ—¥èªŒ
pm2 logs

# é‡å•Ÿæœå‹™
pm2 restart all

# ç›£æ§ç³»çµ±
./ç›£æ§è…³æœ¬.sh --status

# å‚™ä»½è³‡æ–™åº«
./backup-db.sh
```

## ğŸ”’ å®‰å…¨è¨­å®šï¼ˆå¯é¸ï¼‰

### è¨­å®šé˜²ç«ç‰†
```bash
sudo ufw enable
sudo ufw allow ssh
sudo ufw allow 3000
sudo ufw allow 5000
```

### è¨­å®š Nginxï¼ˆå¯é¸ï¼‰
```bash
sudo apt install nginx -y
sudo cp nginx.conf /etc/nginx/sites-available/tutoring-system
sudo ln -s /etc/nginx/sites-available/tutoring-system /etc/nginx/sites-enabled/
sudo nginx -t && sudo systemctl restart nginx
```

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ
1. **ç«¯å£è¢«ä½”ç”¨**: `sudo netstat -tlnp | grep :3000`
2. **æ¬Šé™å•é¡Œ**: `chmod -R 755 ~/tutoring-system`
3. **æœå‹™ç•°å¸¸**: `pm2 logs` æŸ¥çœ‹éŒ¯èª¤
4. **è¨˜æ†¶é«”ä¸è¶³**: å¢åŠ  swap ç©ºé–“

### é‡æ–°éƒ¨ç½²
```bash
pm2 delete all
git pull  # å¦‚æœä½¿ç”¨ Git
./deploy.sh
```

## ğŸ’¡ æ•ˆèƒ½å„ªåŒ–å»ºè­°

### GCP è™›æ“¬æ©Ÿå™¨é…ç½®
- **æœ€ä½**: e2-micro (1 vCPU, 1GB RAM) - é©åˆæ¸¬è©¦
- **å»ºè­°**: e2-small (2 vCPU, 2GB RAM) - é©åˆç”Ÿç”¢
- **é«˜è² è¼‰**: e2-medium (2 vCPU, 4GB RAM) - é©åˆå¤šç”¨æˆ¶

### æˆæœ¬å„ªåŒ–
```bash
# è¨­å®šè‡ªå‹•é—œæ©Ÿï¼ˆç¯€çœæˆæœ¬ï¼‰
sudo crontab -e
# æ·»åŠ ï¼šæ¯å¤©æ™šä¸Š 11 é»é—œæ©Ÿ
# 0 23 * * * /sbin/shutdown -h now

# è¨­å®šè‡ªå‹•å•Ÿå‹•ï¼ˆæ—©ä¸Š 8 é»ï¼‰
# åœ¨ GCP Console è¨­å®šæ’ç¨‹å•Ÿå‹•
```

é€™æ¨£ä½ çš„è£œç¿’ç­ç®¡ç†ç³»çµ±å°±å¯ä»¥åœ¨ GCP ä¸Šç©©å®šé‹è¡Œäº†ï¼ğŸ‰