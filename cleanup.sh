#!/bin/bash

# æ¸…ç†ä¸éœ€è¦çš„æª”æ¡ˆ

GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
NC='\033[0m'

echo "========================================"
echo "æ¸…ç†ä¸éœ€è¦çš„æª”æ¡ˆ"
echo "========================================"
echo ""
echo "å°‡åˆªé™¤ä»¥ä¸‹æª”æ¡ˆ:"
echo ""
echo -e "${YELLOW}ğŸ—‘ï¸  é‡è¤‡çš„éƒ¨ç½²è…³æœ¬:${NC}"
echo "  - deploy.sh (ä¿ç•™ ç°¡æ˜“éƒ¨ç½².sh)"
echo "  - deploy-ubuntu.sh (ä¿ç•™ ç°¡æ˜“éƒ¨ç½².sh)"
echo "  - deploy-micro.sh (ä¿ç•™ ç°¡æ˜“éƒ¨ç½².sh)"
echo "  - quick-deploy.sh (ä¿ç•™ ç°¡æ˜“éƒ¨ç½².sh)"
echo "  - quick-fix.sh (ä¿ç•™ ä¸€éµä¿®å¾©.sh)"
echo "  - instant-fix.sh (ä¿ç•™ ä¸€éµä¿®å¾©.sh)"
echo "  - emergency-fix.sh (ä¿ç•™ ä¸€éµä¿®å¾©.sh)"
echo "  - fix-build.sh (åŠŸèƒ½å·²æ•´åˆ)"
echo "  - fix-database.sh (åŠŸèƒ½å·²æ•´åˆ)"
echo "  - memory-monitor.sh (åŠŸèƒ½å·²æ•´åˆ)"
echo "  - ç›£æ§è…³æœ¬.sh (åŠŸèƒ½å·²æ•´åˆ)"
echo ""
echo -e "${YELLOW}ğŸ—‘ï¸  é‡è¤‡çš„æ–‡æª”:${NC}"
echo "  - å¿«é€Ÿåƒè€ƒ.md (ä¿ç•™ README-ä¿®å¾©æŒ‡å—.md)"
echo "  - å¿«é€Ÿé–‹å§‹.md (ä¿ç•™ README-ä¿®å¾©æŒ‡å—.md)"
echo "  - å¿«é€Ÿéƒ¨ç½².md (ä¿ç•™ README-ä¿®å¾©æŒ‡å—.md)"
echo "  - éƒ¨ç½²æŒ‡å—.md (ä¿ç•™ README-ä¿®å¾©æŒ‡å—.md)"
echo "  - æ•…éšœæ’é™¤.md (ä¿ç•™ ä¿®å¾©å·¥å…·èªªæ˜.md)"
echo "  - å»ºç½®å•é¡Œè§£æ±º.md (ä¿ç•™ ä¿®å¾©æ–°å¢å­¸ç”Ÿå•é¡Œ.md)"
echo "  - Ubuntuå•é¡Œæ’é™¤.md (ä¿ç•™ Nginxè¨­å®šæŒ‡å—.md)"
echo "  - æœ¬åœ°å»ºç½®æ–¹æ¡ˆ.md (ä¸éœ€è¦)"
echo "  - ä¸Šå‚³æ–¹æ¡ˆ.md (ä¿ç•™ upload-fix.bat)"
echo "  - å­¸ç”Ÿç®¡ç†æ–°åŠŸèƒ½æ¸¬è©¦.md (ä¸éœ€è¦)"
echo "  - æ–°åŠŸèƒ½æ¸¬è©¦æŒ‡å—.md (ä¸éœ€è¦)"
echo "  - æ¸¬è©¦æ–°åŠŸèƒ½.md (ä¸éœ€è¦)"
echo "  - e2-microå„ªåŒ–æŒ‡å—.md (ä¸éœ€è¦)"
echo "  - Gitå•é¡Œè§£æ±º.md (ä¸éœ€è¦)"
echo "  - Windowsç”¨æˆ¶æŒ‡å—.md (ä¸éœ€è¦)"
echo ""
echo -e "${YELLOW}ğŸ—‘ï¸  é‡è¤‡çš„ Git å·¥å…·:${NC}"
echo "  - git-setup.sh (ä¸éœ€è¦)"
echo "  - git-setup.bat (ä¸éœ€è¦)"
echo "  - git-status.sh (ä¸éœ€è¦)"
echo "  - update-github.sh (ä¸éœ€è¦)"
echo "  - update-github.bat (ä¸éœ€è¦)"
echo ""
echo -e "${YELLOW}ğŸ—‘ï¸  å…¶ä»–ä¸éœ€è¦çš„æª”æ¡ˆ:${NC}"
echo "  - diagnose-db.js (åŠŸèƒ½å·²æ•´åˆåˆ° diagnose-api.sh)"
echo "  - init-database.js (å¾Œç«¯è‡ªå‹•åˆå§‹åŒ–)"
echo ""
echo -e "${GREEN}âœ… ä¿ç•™çš„é‡è¦æª”æ¡ˆ:${NC}"
echo "  - ç°¡æ˜“éƒ¨ç½².sh (ä¸»è¦éƒ¨ç½²è…³æœ¬)"
echo "  - ä¸€éµä¿®å¾©.sh (ä¸€éµä¿®å¾©å·¥å…·)"
echo "  - setup-nginx.sh (Nginx é…ç½®)"
echo "  - fix-nginx.sh (Nginx è¨ºæ–·)"
echo "  - update-frontend.sh (å‰ç«¯æ›´æ–°)"
echo "  - diagnose-api.sh (ç³»çµ±è¨ºæ–·)"
echo "  - upload-fix.bat (Windows ä¸Šå‚³)"
echo "  - README-ä¿®å¾©æŒ‡å—.md (ä¸»è¦æ–‡æª”)"
echo "  - Nginxè¨­å®šæŒ‡å—.md (Nginx æ–‡æª”)"
echo "  - Nginxå¿«é€Ÿåƒè€ƒ.md (å¿«é€Ÿåƒè€ƒ)"
echo "  - ä¿®å¾©å·¥å…·èªªæ˜.md (å·¥å…·èªªæ˜)"
echo "  - ä¿®å¾©æ–°å¢å­¸ç”Ÿå•é¡Œ.md (å•é¡Œèªªæ˜)"
echo "  - å¿«é€Ÿä¿®å¾©æŒ‡å—.md (å¿«é€ŸæŒ‡å—)"
echo ""
read -p "ç¢ºèªåˆªé™¤? (y/n): " -n 1 -r
echo ""
if [[ ! $REPLY =~ ^[Yy]$ ]]; then
    echo "å·²å–æ¶ˆ"
    exit 0
fi

echo ""
echo "é–‹å§‹æ¸…ç†..."
echo ""

# åˆªé™¤é‡è¤‡çš„éƒ¨ç½²è…³æœ¬
rm -f deploy.sh && echo "âœ“ å·²åˆªé™¤ deploy.sh"
rm -f deploy-ubuntu.sh && echo "âœ“ å·²åˆªé™¤ deploy-ubuntu.sh"
rm -f deploy-micro.sh && echo "âœ“ å·²åˆªé™¤ deploy-micro.sh"
rm -f quick-deploy.sh && echo "âœ“ å·²åˆªé™¤ quick-deploy.sh"
rm -f quick-fix.sh && echo "âœ“ å·²åˆªé™¤ quick-fix.sh"
rm -f instant-fix.sh && echo "âœ“ å·²åˆªé™¤ instant-fix.sh"
rm -f emergency-fix.sh && echo "âœ“ å·²åˆªé™¤ emergency-fix.sh"
rm -f fix-build.sh && echo "âœ“ å·²åˆªé™¤ fix-build.sh"
rm -f fix-database.sh && echo "âœ“ å·²åˆªé™¤ fix-database.sh"
rm -f memory-monitor.sh && echo "âœ“ å·²åˆªé™¤ memory-monitor.sh"
rm -f ç›£æ§è…³æœ¬.sh && echo "âœ“ å·²åˆªé™¤ ç›£æ§è…³æœ¬.sh"

# åˆªé™¤é‡è¤‡çš„æ–‡æª”
rm -f å¿«é€Ÿåƒè€ƒ.md && echo "âœ“ å·²åˆªé™¤ å¿«é€Ÿåƒè€ƒ.md"
rm -f å¿«é€Ÿé–‹å§‹.md && echo "âœ“ å·²åˆªé™¤ å¿«é€Ÿé–‹å§‹.md"
rm -f å¿«é€Ÿéƒ¨ç½².md && echo "âœ“ å·²åˆªé™¤ å¿«é€Ÿéƒ¨ç½².md"
rm -f éƒ¨ç½²æŒ‡å—.md && echo "âœ“ å·²åˆªé™¤ éƒ¨ç½²æŒ‡å—.md"
rm -f æ•…éšœæ’é™¤.md && echo "âœ“ å·²åˆªé™¤ æ•…éšœæ’é™¤.md"
rm -f å»ºç½®å•é¡Œè§£æ±º.md && echo "âœ“ å·²åˆªé™¤ å»ºç½®å•é¡Œè§£æ±º.md"
rm -f Ubuntuå•é¡Œæ’é™¤.md && echo "âœ“ å·²åˆªé™¤ Ubuntuå•é¡Œæ’é™¤.md"
rm -f æœ¬åœ°å»ºç½®æ–¹æ¡ˆ.md && echo "âœ“ å·²åˆªé™¤ æœ¬åœ°å»ºç½®æ–¹æ¡ˆ.md"
rm -f ä¸Šå‚³æ–¹æ¡ˆ.md && echo "âœ“ å·²åˆªé™¤ ä¸Šå‚³æ–¹æ¡ˆ.md"
rm -f å­¸ç”Ÿç®¡ç†æ–°åŠŸèƒ½æ¸¬è©¦.md && echo "âœ“ å·²åˆªé™¤ å­¸ç”Ÿç®¡ç†æ–°åŠŸèƒ½æ¸¬è©¦.md"
rm -f æ–°åŠŸèƒ½æ¸¬è©¦æŒ‡å—.md && echo "âœ“ å·²åˆªé™¤ æ–°åŠŸèƒ½æ¸¬è©¦æŒ‡å—.md"
rm -f æ¸¬è©¦æ–°åŠŸèƒ½.md && echo "âœ“ å·²åˆªé™¤ æ¸¬è©¦æ–°åŠŸèƒ½.md"
rm -f e2-microå„ªåŒ–æŒ‡å—.md && echo "âœ“ å·²åˆªé™¤ e2-microå„ªåŒ–æŒ‡å—.md"
rm -f Gitå•é¡Œè§£æ±º.md && echo "âœ“ å·²åˆªé™¤ Gitå•é¡Œè§£æ±º.md"
rm -f Windowsç”¨æˆ¶æŒ‡å—.md && echo "âœ“ å·²åˆªé™¤ Windowsç”¨æˆ¶æŒ‡å—.md"

# åˆªé™¤ Git å·¥å…·
rm -f git-setup.sh && echo "âœ“ å·²åˆªé™¤ git-setup.sh"
rm -f git-setup.bat && echo "âœ“ å·²åˆªé™¤ git-setup.bat"
rm -f git-status.sh && echo "âœ“ å·²åˆªé™¤ git-status.sh"
rm -f update-github.sh && echo "âœ“ å·²åˆªé™¤ update-github.sh"
rm -f update-github.bat && echo "âœ“ å·²åˆªé™¤ update-github.bat"

# åˆªé™¤å…¶ä»–ä¸éœ€è¦çš„æª”æ¡ˆ
rm -f diagnose-db.js && echo "âœ“ å·²åˆªé™¤ diagnose-db.js"
rm -f init-database.js && echo "âœ“ å·²åˆªé™¤ init-database.js"

echo ""
echo "========================================"
echo -e "${GREEN}âœ… æ¸…ç†å®Œæˆï¼${NC}"
echo "========================================"
echo ""
echo "ğŸ“ ä¿ç•™çš„æª”æ¡ˆçµæ§‹:"
echo ""
echo "ğŸ“‚ éƒ¨ç½²å’Œä¿®å¾©å·¥å…· (7 å€‹)"
echo "  â”œâ”€ ç°¡æ˜“éƒ¨ç½².sh          - ä¸»è¦éƒ¨ç½²è…³æœ¬"
echo "  â”œâ”€ ä¸€éµä¿®å¾©.sh          - ä¸€éµä¿®å¾©æ‰€æœ‰å•é¡Œ"
echo "  â”œâ”€ setup-nginx.sh       - Nginx é…ç½®å·¥å…·"
echo "  â”œâ”€ fix-nginx.sh         - Nginx è¨ºæ–·å·¥å…·"
echo "  â”œâ”€ update-frontend.sh   - å‰ç«¯æ›´æ–°å·¥å…·"
echo "  â”œâ”€ diagnose-api.sh      - ç³»çµ±è¨ºæ–·å·¥å…·"
echo "  â””â”€ upload-fix.bat       - Windows ä¸Šå‚³å·¥å…·"
echo ""
echo "ğŸ“‚ æ–‡æª” (6 å€‹)"
echo "  â”œâ”€ README.md                  - å°ˆæ¡ˆèªªæ˜"
echo "  â”œâ”€ README-ä¿®å¾©æŒ‡å—.md         - å®Œæ•´ä¿®å¾©æŒ‡å— â­"
echo "  â”œâ”€ å¿«é€Ÿä¿®å¾©æŒ‡å—.md            - å¿«é€Ÿåƒè€ƒå¡ç‰‡"
echo "  â”œâ”€ Nginxè¨­å®šæŒ‡å—.md           - Nginx è©³ç´°èªªæ˜"
echo "  â”œâ”€ Nginxå¿«é€Ÿåƒè€ƒ.md           - Nginx å¿«é€Ÿåƒè€ƒ"
echo "  â”œâ”€ ä¿®å¾©å·¥å…·èªªæ˜.md            - å·¥å…·ä½¿ç”¨èªªæ˜"
echo "  â””â”€ ä¿®å¾©æ–°å¢å­¸ç”Ÿå•é¡Œ.md        - å•é¡Œè©³è§£"
echo ""
echo "ğŸ“‚ é…ç½®æª”æ¡ˆ"
echo "  â”œâ”€ package.json"
echo "  â”œâ”€ .env"
echo "  â”œâ”€ nginx.conf"
echo "  â”œâ”€ ecosystem.config.js"
echo "  â”œâ”€ docker-compose.yml"
echo "  â”œâ”€ Dockerfile.backend"
echo "  â””â”€ Dockerfile.frontend"
echo ""
echo -e "${BLUE}ğŸ’¡ å»ºè­°: åŸ·è¡Œ 'git status' æŸ¥çœ‹è®Šæ›´${NC}"
echo ""
